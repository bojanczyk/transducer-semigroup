\section{Further details for the proof of \Cref{lem:rational-to-functor}}

Let $(f_a)_{a\in\Sigma}$ be the family of recognizable functions of type
$\Sigma^* \times \Sigma^* \to \Gamma$ that generates our rational function. By
definition of recognizability, each $f_a$ decomposes into
\[ \Sigma^* \times \Sigma^* \xrightarrow{\;h_a\;} B_a \xrightarrow{\;g_a\;} \Gamma
  \qquad\text{where $h_a$ is a semigroup homomorphism and $B_a$ is finite.} \]
One can check that every $f_a$ then factors through a monoid morphism to the
finite monoid
\[ B = \prod_{a \in \Sigma} h_a(\Sigma^* \times \Sigma^*) \]
Thus, without loss of generality, we may assume for the rest of the proof that
all the semigroups $B_a$ are equal to a common finite monoid $B$ and that each
semigroup homomorphism $h_a$ is in fact a monoid morphism.

For any semigroup $A$, we let $\functor A = B \times (B\to A) \times B$ (as
explained in the main text), endowed with the following semigroup operation:
\begin{align*}
  (\ell_1,\varphi_1,r_1) \cdot (\ell_2,\varphi_2,r_2) = \Big(\ell_1\ell_2,\; \big(b  \mapsto \varphi_1(br_2) \cdot \varphi_2(\ell_1b)\big),\; r_1r_2\Big).
\end{align*}
The construction $\functor$ is extended to morphisms by considering $B\to A$ as the set of $B$-indexed tuples (cf.~\Cref{ex:functors}) of
elements of $A$. To get a transducer semigroup, we take the output mechanism to
be $(\ell,\varphi,r) \mapsto \varphi(e)$ where $e \in B$ is the neutral element.

Our rational function is then recognized by the monoid homomorphism $\Sigma^*
\to \functor(\Gamma^*)$ (indeed, $\functor$ preserves monoids) which maps $a \in
\Sigma$ to $\big(h_a(a,\varepsilon),g_a,h_a(\varepsilon,a)\big)$.
